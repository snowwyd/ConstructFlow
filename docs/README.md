# ConstructFlow Backend API Documentation

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
Backend –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–∞–ø–∫–∞–º–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:
1. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`/api/v1/auth/login [POST]`)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`/api/v1/auth/register [POST]`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/api/v1/auth/me [GET]`)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏ (`/api/v1/auth/role [POST]`)

2. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–∞–ø–∫–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`/api/v1/directories/upload [POST]`)
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`/api/v1/directories [DELETE]`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`/api/v1/directories [GET]`)

- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (`/api/v1/files/upload [POST]`)
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (`/api/v1/files [DELETE]`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ (`api/v1/files/:file_id [GET]`)

3. –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ (`/api/v1/files/:file_id/approve [POST]`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/api/v1/approvals [GET]`)
- –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (`/api/v1/approvals/:approval_id/sign [POST]`)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π (`/api/v1/approval/{approval_id}/annotate [POST]`)
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (`/api/v1/approval/{approval_id}/finalize [POST]`)

–ê —Ç–∞–∫–∂–µ:
- Swagger (`/swagger/index.html`)
---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ docker-compose
- Go 1.20+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- [go-task](https://taskfile.dev/) –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ go-task (https://taskfile.dev/install/)
# –î–ª—è macOS:
brew install go-task

# –î–ª—è Linux:
curl -sL https://taskfile.dev/install.sh | sh

# –î–ª—è Windows:
# –°–∫–∞—á–∞–π—Ç–µ .exe —Ñ–∞–π–ª —Å https://github.com/go-task/task/releases
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /backend

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (PostgreSQL + –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
docker-compose up --build -d # –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç go-task
task build 

# –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –æ—á–∏—Å—Ç–∏—Ç—å –ë–î
# –í–∞–∂–Ω–æ! –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ .env —Ñ–∞–π–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –∏ –ø–æ—Ç–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down -v # –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç go-task
task composedown
```
–ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞:
```
APP_SECRET = your_app_secret
DB_USER = username
DB_PASSWORD = your_password
CONFIG_PATH = configs/local.yaml

APP_PORT=8080
```
configs/local.yaml –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞ –≤–∞—à–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –ó–∞–ø—É—Å–∫ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ backend/
# –û—á–∏—â–∞–µ—Ç –ë–î, –∞ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ç–æ–¥–æ–≤
docker-compose run --rm migrator
```

## API Endpoints

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –æ–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –∑–¥–µ—Å—å, –µ—Å–ª–∏ <u>–ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏</u> –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø—É–Ω–∫—Ç 3)

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`POST /api/v1/auth/login`)
**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "login": "user3",
  "password": "12345678"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –ù–µ–≤–µ—Ä–Ω—ã–µ –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å.
- `404 Not Found`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`POST /api/v1/auth/register`)
**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "login": "new_user",
  "password": "secure_password",
  "role_id": 2
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "user_id": 4
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `404 Not Found`: –†–æ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.
- `409 Conflict`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –ª–æ–≥–∏–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`GET /api/v1/auth/me`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": 3,
  "login": "user3",
  "role": "admin"
}
```

**–û—à–∏–±–∫–∏:**
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `404 Not Found`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏ (`POST /api/v1/auth/role`)
**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "role_name": "new_role"
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "role_id": 3
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `409 Conflict`: –†–æ–ª—å —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`POST /api/v1/directories/upload`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "parent_path_id": 1,
  "name": "Test project"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": 5
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 6. –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`DELETE /api/v1/directories`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "directory_id": 5
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "Directory deleted successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª–µ–Ω–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 7. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`POST /api/v1/directories`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "is_archive": false
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
    "data": [
        {
            "id": 1,
            "name_folder": "ROOT",
            "status": "",
            "files": [
                {
                    "id": 1,
                    "name_file": "File1",
                    "status": "draft",
                    "directory_id": 1
                },
                {
                    "id": 2,
                    "name_file": "File2",
                    "status": "draft",
                    "directory_id": 1
                }
            ]
        },
        {
            "id": 2,
            "name_folder": "Folder1",
            "status": "",
            "parent_path_id": 1,
            "files": [
                {
                    "id": 3,
                    "name_file": "File3",
                    "status": "draft",
                    "directory_id": 2
                }
            ]
        },
        {
            "id": 3,
            "name_folder": "Folder2",
            "status": "",
            "parent_path_id": 1,
            "files": [
                {
                    "id": 4,
                    "name_file": "File4",
                    "status": "draft",
                    "directory_id": 3
                }
            ]
        },
        {
            "id": 4,
            "name_folder": "Folder3",
            "status": "",
            "parent_path_id": 2,
            "files": [
                {
                    "id": 5,
                    "name_file": "File5",
                    "status": "draft",
                    "directory_id": 4
                },
                {
                    "id": 6,
                    "name_file": "File6",
                    "status": "draft",
                    "directory_id": 4
                }
            ]
        }
    ]
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 8. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (`POST /api/v1/files/upload`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "directory_id": 1,
  "name": "New File.txt"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": 7
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ñ–∞–π–ª–∞.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 9. –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (`DELETE /api/v1/files`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "file_id": 7
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "File deleted successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª–µ–Ω–∏—é —Ñ–∞–π–ª–∞.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 10. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ (`GET /api/v1/files/:file_id`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø.1 –ø–æ –æ–±—Ä–∞–∑—Ü—É (–¥–ª—è snowwy)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `file_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1).

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
    "id": 1,
    "name_file": "File1",
    "status": "draft",
    "directory_id": 1
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É.
- `404 Not Found`: –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 11. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ (`POST /api/v1/approval/{file_id}/approve`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `file_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3).

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "File sent for approval"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID —Ñ–∞–π–ª–∞ –∏–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `404 Not Found`: –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 12. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`GET /api/v1/approvals`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–û—Ç–≤–µ—Ç (200 OK):**
```json
[
    {
        "id": 1,
        "file_id": 3,
        "file_name": "File3",
        "status": "on approval",
        "workflow_order": 1
    }
]
```

**–û—à–∏–±–∫–∏:**
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 13. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (`POST /api/v1/approval/{approval_id}/sign`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `approval_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–¥–æ–±—Ä–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1).

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "Approval signed successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –æ–¥–æ–±—Ä–µ–Ω–∏—è.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞.
- `404 Not Found`: –û–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 14. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π (`POST /api/v1/approval/{approval_id}/annotate`)
**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `approval_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–¥–æ–±—Ä–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1).

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "message": "This file requires additional review."
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "Approval annotated successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –æ–¥–æ–±—Ä–µ–Ω–∏—è –∏–ª–∏ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏.
- `404 Not Found`: –û–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 15. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (`POST /api/v1/approval/{approval_id}/finalize`)

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ, –∫–æ–≥–¥–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–¥–ø–∏—Å—å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Authorization: Bearer <JWT_TOKEN>
```
–í –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `approval_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–¥–æ–±—Ä–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2).

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "Approval finalized successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –æ–¥–æ–±—Ä–µ–Ω–∏—è.
- `401 Unauthorized`: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- `403 Forbidden`: –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ü–µ–ø–æ—á–∫–µ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.
- `404 Not Found`: –û–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
- `500 Internal Server Error`: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---

### –û–±—â–∏–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ:
- **400 Bad Request**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
- **401 Unauthorized**: –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å—Ç–µ–∫ –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω.
- **403 Forbidden**: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏.
- **404 Not Found**: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π —Ä–µ—Å—É—Ä—Å (—Ñ–∞–π–ª, –æ–¥–æ–±—Ä–µ–Ω–∏–µ) –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- **500 Internal Server Error**: –ü—Ä–æ–∏–∑–æ—à–ª–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

---


–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Swagger UI
Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
/swagger/index.html
```

---


## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–æ–∫
–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ (–ø—Ä–∏–º–µ—Ä –¥–ª—è invalid credentials):
```json
{
  "error": {
    "code": "INVALID_CREDENTIALS",
    "message": "Invalid login or password"
  }
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/backend
‚îú‚îÄ‚îÄ cmd/                # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (HTTP-—Å–µ—Ä–≤–µ—Ä)
‚îú‚îÄ‚îÄ internal/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ app/            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ controller/     # HTTP-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ domain/         # –°—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/ # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ë–î –∏ –¥—Ä—É–≥–∏–º–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ usecase/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ data/               # –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ pkg/                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã
–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ **[–î–∞–Ω–µ](https://github.com/snowwyd)** üòè

<img src ="https://media.giphy.com/media/7dHKAiRnGDvbSAbT54/giphy.gif" />
  