# Инструкция по организации Git-веток для фронтенд и бэкенд разработки

## Обзор подхода

В нашем репозитории используется монорепозиторий с двумя основными компонентами:

- Папка `/frontend` - для фронтенд-кода
- Папка `/backend` - для бэкенд-кода

Основные ветки репозитория:

- Ветка `master` - стабильная версия продукта
- Ветка `front-dev` - разработка фронтенда
- Ветка `back-dev` - разработка бэкенда

## Настройка рабочей среды

### Первоначальная настройка веток

```bash
# Создание ветки для фронтенда
git checkout master
git checkout -b front-dev

# Создание ветки для бэкенда
git checkout master
git checkout -b back-dev
```

Через UI GitHub:

1. Откройте репозиторий на GitHub
2. Перейдите в раздел "Branches"
3. Нажмите "New branch"
4. Введите имя ветки
5. Выберите "master" в качестве источника
6. Нажмите "Create branch"

## Правила для команды разработчиков

### Общие правила

- Ветка `master` защищена, прямые коммиты запрещены
- Все изменения в `master` попадают только через Pull Request
- Каждый Pull Request требует как минимум одного одобрения

### Правила оформления коммитов

- Формат: `#проект Fixed(что вы сделали). Ref задача`
- В начале указывается название проекта с символом '#'
- Затем глагол, описывающий действие ("Fixed", "Added", "Made", "Implemented")
- В конце добавляется ссылка на задачу с префиксом "Ref"

Примеры:

```
#cf Fixed dependecies. Ref #1
#cf Fixed dependecies. Ref CF-1
#cf Made an authorization server. Ref CF-2
```

### Для фронтенд-разработчиков

- Работайте только в ветке `front-dev`
- Изменяйте только файлы в папке `/frontend`
- Регулярно синхронизируйтесь с `master`

### Для бэкенд-разработчиков

- Работайте только в ветке `back-dev`
- Изменяйте только файлы в папке `/backend`
- Регулярно синхронизируйтесь с `master`

## Рабочий процесс

### Создание feature-веток для новых функций

#### Для фронтенд-задач:

```bash
git checkout front-dev
git pull origin front-dev
git checkout -b front-feature-login-form
```

#### Для бэкенд-задач:

```bash
git checkout back-dev
git pull origin back-dev
git checkout -b back-feature-auth-api
```

#### Правила именования feature-веток:

- Используйте префикс `front-feature-` или `back-feature-`
- Добавляйте краткое описание функциональности через дефис
- Для исправления ошибок используйте префиксы `front-fix-` или `back-fix-`

### Разработка новой функциональности

1. Фронтенд и бэкенд-команды согласовывают API/интерфейсы
2. Каждая команда работает в своих feature-ветках

### Работа в feature-ветке

```bash
git checkout front-feature-login-form  # или ваша feature-ветка
git add frontend/  # или backend/ для бэкенд-задач
git commit -m "#cf Добавлен компонент авторизации. Ref CF-42"
git push origin front-feature-login-form
```

### Завершение работы в feature-ветке

1. Убедитесь, что код работает и проходит все тесты
2. Создайте Pull Request из вашей feature-ветки в соответствующую ветку разработки

### Слияние feature-ветки в ветку разработки

Через GitHub UI:

1. Перейдите в "Pull requests" → "New pull request"
2. Выберите "base:" (`front-dev` или `back-dev`) и "compare:" (ваша feature-ветка)
3. Нажмите "Create pull request"
4. Заполните заголовок в формате: `#cf Добавлен компонент авторизации. Ref CF-42`
5. Назначьте ревьюеров
6. После получения одобрения нажмите "Merge pull request"

## Слияние изменений в master

### Через GitHub UI

1. Создайте новый Pull Request
2. Выберите `base: master` и `compare: front-dev` (или `back-dev`)
3. Заполните заголовок:
   - Для фронтенда: "#cf Frontend: [краткое описание]. Ref CF-42"
   - Для бэкенда: "#cf Backend: [краткое описание]. Ref CF-42"
4. Назначьте ревьюеров и дождитесь одобрения
5. Выберите метод слияния "Create a merge commit"
6. Нажмите "Merge pull request"

## Синхронизация рабочих веток после слияния в master

Через GitHub UI:

1. Создайте новый Pull Request
2. Выберите "base:" (`front-dev` или `back-dev`) и "compare: master"
3. Заполните заголовок: `#cf Синхронизация front-dev с master. Ref CF-XX`
4. Нажмите "Create pull request" → "Merge pull request"

## Разрешение конфликтов

При возникновении конфликтов:

1. Обсудите их с командой
2. В GitHub нажмите "Resolve conflicts"
3. Отредактируйте конфликтующие файлы
4. Нажмите "Mark as resolved" для каждого файла
5. Нажмите "Commit merge" с сообщением: `#cf Разрешены конфликты с master. Ref CF-42`

## Визуальная схема процесса

```
master:    A---B---C----------------F-----------------I
                 \                /                 /
front-dev:        \-D---E--------+-------L--------+
                      \     \            /
front-feature:         \     G---H---J--
                        \
back-dev:                K-----------------M-------N
                                            \     /
back-feature:                                O---P
```

## Дополнительные рекомендации

- Используйте содержательные сообщения коммитов
- Делайте регулярные коммиты небольшого размера
- Всегда проверяйте, что вы находитесь в правильной ветке
- Регулярно синхронизируйте рабочие ветки с master
- Общайтесь с командой о текущих изменениях
